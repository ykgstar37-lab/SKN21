<!-- form2.html -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body>
        <!-- 
        checkbox 체크가 되면 name=value(hobby=독서) 로 서버에 전송.
        아무것도 선택되지 않으면 name(hobby)으로는 전송되는 것이 없다.
        checkbox의 이름이 같고 여러 개 선택한 경우 같은 이름으로 선택한 값들이 전송된다.
            hobby=독서&hobby=음악  
        -->
        <div class="container mt-3">
            <form name="f1">
                취미를 선택하세요 (1개 이상선택)
                <div>
                    <!-- bootstrap checkbox/radio - class="form-check-input"  라벨 클래스는 form-check-label-->
                    <input type="checkbox" id="h1" name="hobby" value="독서" class="form-check-input"/>
                    <label for="h1">독서</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="음악" class="form-check-input" />
                    <label>음악</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="운동" class="form-check-input" />
                    <label>운동</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="게임" class="form-check-input" />
                    <label>게임</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="영화" class="form-check-input" />
                    <label>영화</label>
                </div>
                <div>
                    <input type="checkbox" name="allCheck" onclick="checkAll()" class="form-check-input" />
                    <label>모두선택/해제</label>
                </div>

                <p>
                    <input type="button" value="체크박스확인" onclick="checkHobby()" class="btn btn-primary mt-1" />
                </p>
            </form>
        </div>

        <script>
            function checkHobby() {
                // NodeList(배열) -> hobby checkbox들
                const hobby_list = document.f1.hobby; 
                let cnt = 0; // check된 것의 개수 저장할 변수
                for (let idx in hobby_list) {
                    if (hobby_list[idx].checked) {
                        //checked=true
                        cnt++;
                    }
                }
                console.log("cnt", cnt);
                if (cnt == 0) {
                    alert("취미를 한개 이상 선택하세요.");
                    // submit 이벤트 처리 -> 전송이 안되도록 처리.
                }
            }

            function checkAll() {
                // allCheck 체크박스와 hobby 체크박스들의 체크상태를 같게 한다.
                // allCheck의 체크 여부(checked)
                const f1 = document.f1;
                const allCheck = f1.allCheck;
                console.log("allCheck의 checked상태", allCheck.checked);

                // hobby checkbox들을 조회
                const hobbyList = f1.hobby;  // hobby가 여러개 -> 배열에 담아서 반환.
                console.log(hobbyList);
                for (let idx in hobbyList) {
                    // 배열의 hobby 체크박스들의 checked 값을 allCheck의 상태로 변경.
                    hobbyList[idx].checked = allCheck.checked;
                }
            }
        </script>
    </body>
</html>
